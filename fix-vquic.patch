--- lib/vquic/curl_osslq.c
+++ lib/vquic/curl_osslq.c
@@ -285,7 +285,7 @@ struct cf_osslq_ctx {
-  struct uint_hash streams;          /* hash `data->mid` to `h3_stream_ctx` */
+  struct Curl_hash streams;          /* hash `data->mid` to `h3_stream_ctx` */
@@ -307,7 +307,7 @@ static CURLcode cf_osslq_ctx_init(struct cf_osslq_ctx *ctx)
-  Curl_uint_hash_init(&ctx->streams, 63, h3_stream_hash_free);
+  Curl_hash_init(&ctx->streams, 63, h3_stream_hash_free);
@@ -317,7 +317,7 @@ static void cf_osslq_ctx_free(struct cf_osslq_ctx *ctx)
-    Curl_uint_hash_destroy(&ctx->streams);
+    Curl_hash_clean(&ctx->streams);
@@ -613,7 +613,7 @@ static CURLcode h3_data_setup(struct cf_osslq_ctx *ctx, struct cf_data *data)
-  struct h3_stream_ctx *stream = H3_STREAM_CTX(ctx, data);
+  struct h3_stream_ctx *stream = data ? Curl_hash_get(&ctx->streams, data->mid) : NULL;
@@ -638,7 +638,7 @@ static CURLcode h3_data_setup(struct cf_osslq_ctx *ctx, struct cf_data *data)
-  if(!Curl_uint_hash_set(&ctx->streams, data->mid, stream)) {
+  if(!Curl_hash_add(&ctx->streams, data->mid, stream)) {
@@ -664,7 +664,7 @@ static void h3_data_done(struct cf_osslq_ctx *ctx, struct cf_data *data)
-    Curl_uint_hash_remove(&ctx->streams, data->mid);
+    Curl_hash_remove_by_key(&ctx->streams, data->mid);
@@ -709,7 +709,7 @@ static struct h3_stream_ctx *cf_osslq_get_qstream(struct cf_osslq_ctx *ctx, unsigned int id)
-     Curl_uint_hash_visit(&ctx->streams, cf_osslq_find_stream, &fctx);
+     Curl_hash_foreach(&ctx->streams, cf_osslq_find_stream, &fctx);
@@ -1525,7 +1525,7 @@ static CURLcode cf_osslq_check_and_unblock(struct cf_osslq_ctx *ctx)
-    if(ctx->items_max < Curl_uint_hash_count(&ctx->streams)) {
+    if(ctx->items_max < Curl_hash_count(&ctx->streams)) {
--- lib/vquic/vquic_int.h
+++ lib/vquic/vquic_int.h
@@ -52,7 +52,7 @@
-#define H3_STREAM_CTX(ctx, data) \
-  (data ? Curl_uint_hash_get(&(ctx)->streams, (data)->mid) : NULL)
+#define H3_STREAM_CTX(ctx, data) \
+  (data ? Curl_hash_get(&(ctx)->streams, (data)->mid) : NULL)
